<view class="container">
  <view class="form-group">
    <view class="section-title">报修类别</view>
    <van-radio-group value="{{ category }}" bind:change="onCategoryChange" direction="horizontal">
      <van-radio name="public" checked-color="#07c160">公共区域</van-radio>
      <van-radio name="household" checked-color="#07c160" custom-class="ml-20">入户维修</van-radio>
    </van-radio-group>
  </view>

  <view class="form-group">
    <view class="section-title">报修类型</view>

    <van-field
      value="{{ typeText }}"
      placeholder="请选择报修类型"
      readonly
      clickable
      is-link
      bind:click-input="showTypePickerFn"
      bind:click="showTypePickerFn"
      border="{{ false }}"
      custom-class="picker-field"
    />
  </view>

  <view class="form-group">
    <view class="section-title">紧急程度</view>
    <van-radio-group value="{{ priority }}" bind:change="onPriorityChange" direction="horizontal">
      <van-radio name="low" checked-color="#07c160">一般</van-radio>
      <van-radio name="medium" checked-color="#ff976a" custom-class="ml-20">紧急</van-radio>
      <van-radio name="high" checked-color="#ee0a24" custom-class="ml-20">非常紧急</van-radio>
    </van-radio-group>
  </view>

  <view class="form-group">
    <view class="section-title">报修位置</view>
    <view class="location-hint">{{ locationHint }}</view>
    <van-field
      value="{{ location }}"
      placeholder="请输入具体位置，如：1号楼1单元101室客厅"
      border="{{ false }}"
      custom-class="input-field"
      bind:change="onLocationChange"
    />
  </view>

  <view class="form-group">
    <view class="section-title">问题摘要</view>
    <van-field
      value="{{ summary }}"
      placeholder="请简要描述问题，如：水龙头漏水"
      border="{{ false }}"
      custom-class="input-field"
      bind:change="onSummaryChange"
    />
  </view>

  <view class="form-group">
    <view class="section-title">详细描述</view>
    <van-field
      value="{{ description }}"
      type="textarea"
      placeholder="请详细描述您遇到的问题，以便我们更好地为您服务"
      autosize="{{ {minHeight: 100} }}"
      border="{{ false }}"
      custom-class="textarea-field"
      bind:change="onDescriptionChange"
    />
  </view>

  <view class="form-group">
    <view class="section-title">联系信息</view>
    <view class="contact-hint">{{ contactHint }}</view>
    <van-field
      value="{{ reporterName }}"
      placeholder="请输入您的姓名"
      border="{{ false }}"
      custom-class="input-field"
      bind:change="onReporterNameChange"
    />
    <van-field
      value="{{ reporterPhone }}"
      placeholder="请输入您的手机号"
      type="number"
      border="{{ false }}"
      custom-class="input-field"
      bind:change="onReporterPhoneChange"
    />
  </view>

  <view class="form-group">
    <view class="section-title">上传照片/视频</view>
    <van-uploader 
      file-list="{{ fileList }}" 
      bind:after-read="afterRead" 
      bind:delete="deleteFile"
      max-count="3" 
    />
  </view>

  <van-popup show="{{ showTypePicker }}" position="bottom" round bind:close="onTypeCancel">
    <van-picker
      show-toolbar
      title="请选择报修类型"
      columns="{{ typeOptions }}"
      bind:confirm="onTypeConfirm"
      bind:cancel="onTypeCancel"
    />
  </van-popup>

  <view class="submit-bar">
    <van-button type="primary" block round bind:tap="onSubmit">提交报修</van-button>
  </view>
</view>
