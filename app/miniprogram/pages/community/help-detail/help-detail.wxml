<view class="container">
  <!-- Header -->
  <view class="card header-section">
    <view class="user-row">
      <image class="avatar" src="{{userInfo.avatar || '/image/default-avatar.png'}}"></image>
      <view class="user-details">
        <text class="username">{{userInfo.name}}</text>
        <text class="time">{{publishTime}}</text>
      </view>
      <van-tag type="warning" wx:if="{{isUrgent}}">急</van-tag>
    </view>
  </view>

  <!-- Content -->
  <view class="card content-section">
    <text class="help-title">{{title}}</text>
    <text class="help-content">{{content}}</text>
    
    <!-- Images if any -->
    <view class="image-grid" wx:if="{{images.length > 0}}">
      <block wx:for="{{images}}" wx:key="index">
        <image 
          class="content-image" 
          src="{{item}}" 
          mode="aspectFill"
          bind:tap="previewImage"
          data-url="{{item}}"
        ></image>
      </block>
    </view>
  </view>

  <!-- Help Info -->
  <view class="card info-section">
    <view class="info-row">
      <van-icon name="location-o" size="18px" color="#999" />
      <text class="info-text">{{location}}</text>
    </view>
    <view class="info-row" wx:if="{{reward}}">
      <van-icon name="gold-coin-o" size="18px" color="#ff9800" />
      <text class="info-text reward-text">感谢费: ¥{{reward}}</text>
    </view>
  </view>

  <!-- Response List -->
  <view class="card response-section">
    <view class="section-header">
      <text class="section-title">响应列表 ({{responses.length}})</text>
    </view>
    
    <block wx:if="{{responses.length > 0}}">
      <view class="response-item" wx:for="{{responses}}" wx:key="id">
        <view class="response-user">
          <image class="response-avatar" src="{{item.avatar || '/image/default-avatar.png'}}"></image>
          <view class="response-info">
            <text class="response-name">{{item.name}}</text>
            <text class="response-time">{{item.time}}</text>
          </view>
        </view>
        <text class="response-content">{{item.message}}</text>
        <van-button 
          size="small" 
          round 
          plain 
          type="primary" 
          wx:if="{{isOwner}}"
          bind:click="onContact"
          data-id="{{item.id}}"
        >
          联系TA
        </van-button>
      </view>
    </block>

    <view class="empty-response" wx:else>
      <van-icon name="friends-o" size="48px" color="#ddd" />
      <text class="empty-text">暂无响应</text>
    </view>
  </view>

  <!-- Action Button -->
  <view class="action-bar" wx:if="{{!isOwner}}">
    <van-button 
      block 
      round 
      color="#07c160" 
      bind:click="onHelp"
    >
      我来帮忙
    </van-button>
  </view>

  <!-- Owner Actions -->
  <view class="action-bar owner-actions" wx:else>
    <van-button round plain bind:click="onEdit">编辑</van-button>
    <van-button round plain type="danger" bind:click="onDelete">删除</van-button>
    <van-button round color="#07c160" bind:click="onResolve">已解决</van-button>
  </view>
</view>
